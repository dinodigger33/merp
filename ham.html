<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Bouncing Draggable Windows</title>
  <style>
    .draggable-window {
      width: 200px;
      height: 150px;
      position: absolute;
      cursor: move;
      background-color: lightblue;
      border: 1px solid #000;
      /* Initial position */
      top: 50px;
      left: 50px;
    }
  </style>
</head>
<body>
  <div class="draggable-window" id="window1">
    <!-- Content of the window -->
    Drag me around!
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const win = document.getElementById('window1');
      const container = document.documentElement; // The entire HTML document

      let posX = 0, posY = 0, mouseX = 0, mouseY = 0;
      let velocityX = 2, velocityY = 2; // Initial velocity
      let isDragging = false;

      const onMouseMove = (e) => {
        if (!isDragging) return;
        e.preventDefault();
        posX = mouseX - e.clientX;
        posY = mouseY - e.clientY;
        mouseX = e.clientX;
        mouseY = e.clientY;
        win.style.top = (win.offsetTop - posY) + "px";
        win.style.left = (win.offsetLeft - posX) + "px";
      };

      const onMouseUp = () => {
        isDragging = false;
        document.removeEventListener('mouseup', onMouseUp);
        document.removeEventListener('mousemove', onMouseMove);
        requestAnimationFrame(bounce);
      };

      const onMouseDown = (e) => {
        e.preventDefault();
        isDragging = true;
        mouseX = e.clientX;
        mouseY = e.clientY;
        document.addEventListener('mouseup', onMouseUp);
        document.addEventListener('mousemove', onMouseMove);
      };

      const bounce = () => {
        if (isDragging) return;

        let rect = win.getBoundingClientRect();

        if (rect.top <= 0 || rect.bottom >= container.clientHeight) {
          velocityY = -velocityY;
        }
        if (rect.left <= 0 || rect.right >= container.clientWidth) {
          velocityX = -velocityX;
        }

        win.style.top = (win.offsetTop + velocityY) + "px";
        win.style.left = (win.offsetLeft + velocityX) + "px";

        requestAnimationFrame(bounce);
      };

      win.addEventListener('mousedown', onMouseDown);
      requestAnimationFrame(bounce);
    });
  </script>
</body>
</html>
